---
layout: post
title: 파일 입·출력
description: >
  파일의 입·출력을 위한 스트림을 생성하고, 주고 받기
hide_description: true
sitemap: false
date: 2021-03-19 22:06:00 +0900
category: language
tag: [c]
---

# 파일 입·출력

## 파일의 개방과 종결

### 파일의 개방

* 데이터를 주고 받을 수 있는 스트림의 생성

```c
#include <stdio.h>

FILE *fopen(const char * filename, const char *mode)
// 성공 시 해당 파일의 파일이라는 구조체의 포인터 리턴, 실패시 null포인터 리턴
```

> 파일을 개방한다는 것 보다는 파일을 읽고 쓰기 위한 스트림을 생성하는 함수라고 이해하자.

### 파일 개방 모드

* 파일 접근 모드 + 데이터 입·출력 모드

### 파일 접근 모드

* 개방한 파일의 사용 용도를 결정

| 모드 | 의미                                                                                                                                             |
|:------:|:---------------------------------------------------------------------------------------------------------------------------------------------:|
| r    | 읽기(read) 전용으로 파일 오픈 <br/> 파일이 없거나 찾을 수 없는 경우 호출 실패                                                                     |
| w    | 쓰기(write) 전용으로 파일 오픈 <br/> 지정한 파일명이 있는 경우 : 파일 내용을 모두 지우고 새로 기입 <br/> 지정한 파일명이 없는 경우 : 새로운 파일을 생성 |
| a    | 추가(append) 쓰기 전용으로 파일 오픈 <br/> 지정한 파일이 있으면 파일의 끝에서 부터 내용 추가                                                      |
| r+   | 파일을 읽고 쓰기 위해 오픈 <br/> 지정한 파일이 있는 경우 : 기존내용 덮어쓰기 <br/> 지정한 파일이 없는 경우 : 새로운 파일 생성하여 데이터 기록           |
| w+   | 파일을 읽고 쓰기 위해 오픈 <br/> 지정한 파일이 있는 경우 : 파일 내용을 모두 지우고 새로 기입 <br/> 지정한 파일이 없는 경우 : 새로운 파일 생성           |
| a+   | 파일을 읽고 추가적으로 쓰기 위해 오픈 <br/> 지정한 파일이 있으면 파일의 끝에서부터 내용 추가 <br/> 나머지 기능은 r+와 동일                              |

&nbsp;&nbsp;r+, w+, a+의 경우 작업을 전환(데이터 읽기 ➡ 데이터 쓰기)할 때 버퍼링(버퍼를 비워주는 작업)을 해줘야 한다. 이 때 문제점이 발생할 수 있으니 r, w, a를 이용하는 것이 좋다.

### 데이터 입·출력 모드

* t : 텍스트 모드(text mode)
* b : 2진 모드(binary mode)

### CR & LF

* CR(carriage return) '\r'로 표시
* LF(Line Feed) '\n'으로 표시

### 텍스트 모드와 2진 모드의 차이점

* 텍스트파일 
* 2진 모드
    * 데이터의 조작이 함부로 일어나며 안되는 유형일 경우 사용(영상, 음성)

