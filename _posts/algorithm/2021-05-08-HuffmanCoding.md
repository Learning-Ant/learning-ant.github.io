---
layout: post
title: 허프만 코딩
description: >
  Huffman Coding
hide_description: false
sitemap: false
date: 2021-05-08 23:24:00 +0900
category: algorithm
tag : [greedy]
---

# 허프만 코딩(Huffman Coding)

> 허프만 코딩은 탐욕 알고리즘을 사용해 설계된 압축 알고리즘이다. 보통 우리가 접하게되는 mp3나 jpeg의 포맷들이 이 허프만 코딩을 이용하는 압축 데이터 포맷 중 하나이다. 이 허프만 코딩을 이해하려면 먼저 "고정 길이 코드"와 "접두어 코드"에 대해 이해해야 한다.
{:.note title="attention"}

## 고정 길이 코드와 접두어 코드

### 고정 길이 코드

> 고정 길이 코드는 모든 코드의 길이가 똑같은 코드 체계를 말한다.
{:.note title="attention"}

모든 코드의 길이가 같다는 것은 어떤 데이터를 표현하는 데 필요한 데이터 값의 길이가 동일하다는 의미이다. 이런 고정 길이 코드의 대표적인 예시가 ASCII Code이다.  
ASCII Code는 모든 코드의 길이가 8bit로 일정하다.  
이런 고정 길이 코드의 장점은 사용 용이성에 있다. ASCII Code로 어떤 문자열을 표현하고 싶다면 8bit 길이의 데이터를 계속이어 붙이면 되고, 이 데이터의 각 요소를 알고 싶다면 8bit씩 쪼갠 후에 매핑하면 쉽게 어떤 문자열인지 알 수 있기 때문이다.  

'01100010011000100110000101100001'를 해석하는 과정을 통해 좀 더 쉽게 이해해보도록 하자.  
먼저, 위의 데이터를 8bit씩 쪼갠다. 그러면 아래와 같이 쪼갤 수 있다.  

|ASCII(이진수)|01100010|01100010|01100001|01100001|
|:---|:---|:---|:---|:---|

이제 이를 십진수로 표현하면 각각 98 98 97 97이 된다.

|ASCII(이진수)|01100010|01100010|01100001|01100001|
|:---|:---|:---|:---|:---|
|ASCII(십진수)|98|98|97|97|

각 숫자에 연결되는 ASCII 기호를 매칭하면 아래표와 같다.

|ASCII(이진수)|01100010|01100010|01100001|01100001|
|:---|:---|:---|:---|:---|
|ASCII(십진수)|98|98|97|97|
|ASCII 기호|b|b|a|a|

이렇게 '01100010011000100110000101100001'을 해석하면 'bbaa'라는 문자열이 나오게 되는 것이다. 이처럼 고정 길이 코드는 사용하기에 간편하다.

### 접두어 코드

> 접두어 코드는 가변 길이 코드의 한 종류이다.
{:.note title="attention"}

위에서 알아본 고정 길이 코드와 다르게 가변 길이 코드는 각 코드의 데이터 길이가 다른 것을 의미한다. 이런 가변 길이 코드는 비록 해석(데이터 처리)는 번거롭지만 고정적인 길이를 가질 필요가 없기 때문에 저장 공간의 절약이 가능해진다.  

이런 가변 길이 코드 중 접두어 코드라는 것이 있는데, 이는 각 코드의 데이터 값이 다른 코드의 접두어가 되지 않는 코드를 뜻한다.  
여기서 약간 오해의 소지가 있는 것이 얼핏 '접두어 코드'라는 명칭때문에 접두어로 사용가능한 코드들을 모아 둔 것일거란 느낌이 들 수 있다. 사실 이 코드는 '무접두어 코드'가 좀 더 직관적으로 의미를 전달해 줄 수 있는 단어이다. 다만 '접두어 코드'라고 더 많이 불릴 뿐 '무접두어 코드'라고 기억해두는 것이 좋을 수도 있다.  

예를 들어 {"0", "1", "0010", "111"}과 같은 코드가 있다고하면 "0"이라는 코드를 접두어로 가지는 코드가 "0010"이 있고, "1"이라는 코드를 접두어로 가지는 "111"이라는 코드가 있으므로 이는 접두어 코드가 될 수 없다.  
반면, {"00", "011", "111", "010"}과 같은 코드는 각 코드를 접두어로 가지는 코드가 존재하지 않으므로 접두어 코드라 할 수 있다.  

각각 a, b, c, d를 위의 코드({"00", "011", "111", "010"})와 매칭시켜 코드를 만들었다고 하자.

$$
a = 00 \\
b = 011 \\
c = 111 \\
d = 010
$$

이렇게 매칭 되었다고 할 때 위의 bbaa를 표현하기 위해 우리는 '0110110000'이라고 표현할 수 있게 된다. 이렇게되면 32bit를 사용하던 bbaa라는 문자열이 단 10bit만으로 표현이 가능해진다.  
이런 원리로 데이터의 압축이 가능하게 되는 것이다.

## 허프만 코딩

### 허프만 트리 만들기

> 허프만 코딩은 허프만 트리를 만들면서 구현이 가능해진다. 이 허프만 트리는 ['이진 트리'](/data-structure/2021-03-30-Tree(Binary))를 기반으로 만들어진다.  
> 한가지 더 기억해야 할 것은 '기호의 빈도'이다. 많이 나오는 기호의 데이터 길이를 짧게해야 압축률이 더욱 높아지기 때문에 기호의 빈도는 중요하다.
{:note title="attention"}

이진 트리로 허프만 트리를 만들면 이는 접두어 코드를 표현하는 데 활용된다. 여기서 만들어지는 허프만 트리는 왼쪽 자식의 값은 0, 오른쪽 자식의 값은 1을 가지게 된다. 루트 노드부터 리프 노드까지 그 값들을 읽어가고, 그 읽어낸 값은 한 코드와 매칭되게 된다.  
즉, 각 리프 노드에는 매칭되는 기호가 있게 된다. 

![허프만 트리](/assets/img/algorithm/huffman/huffman_tree.png)
{:.lead loading="lazy" align="center"}

허프만 트리의 모습
{:.figcaption}

작성중